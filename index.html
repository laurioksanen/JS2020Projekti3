<!DOCTYPE html>
<html lang="fi">
	<script
src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"></script>

<!-- Tämä kolmas projekti on jquery muunnos ensimmäisestä projektista, jossa tein todo-listan -->


	<script>
		//jquery funktiot toteutetaan document ready eventissä, koska w3schools niin suositteli
		$(document).ready(function(){
			// funktio toteutetaan kun sivu on ladattu. Nimi jäi vanhasta todoListasta. 
			//Funktio asettaa aika tietoja sivulle.
			function onLoad() {
		var pvm = new Date(); 
		var minuutti = pvm.getMinutes();
		if(minuutti < 10) {
			minuutti = "0" + minuutti;
		}
		$("#aika").html(pvm.getHours()+":"+ minuutti +"\t /\t" + pvm.getDate() + "." + pvm.getMonth());
		}
			//kutsutaan aikaisemmin määrittetyä funktiota
			onLoad();
			
			//tämä funktio toteuttaan kun lisaa nappia klikataan. funktio lisää listaan syötetyn tehtävän
		$("#lisaa").click(function() {
			var sisalto = $("#text").val();
			var lista = $("#lista");
			if(sisalto.length<=0) {
				return;
			}
			lista.append(lista.val() + "<li>"+sisalto+" "+"<button onclick='poista()'>poista</button><br></br></li>");
		});

		//seuraava funktio toteutuu tyhjennä napin painalluksesta ja tyhjentää listan, ensiksi varmistaen sen käyttäjältä
		$("#tyhjenna").click(function() {
			if($("#lista").length>0) {
				var jooEi = window.confirm("Halutako varmasti tyhjentää listan?");
			}
			if(jooEi) {
				$("#lista").html("");
			}
		})
			
		}); 
		// en millään löytänyt tai keksinyt keinoa poistaa tietty arvo listasta jquerylla
		// funktio poistaa halutun arvon listasta
		function poista() {
			event.currentTarget.parentElement.remove();
			//lähde:
			//https://stackoverflow.com/questions/17168582/delete-current-parent-node-in-recursion/17168706
		}
	 </script>      
	<head"> 
		<title>Todo-List</title>
		<link rel="stylesheet" href="styles.css">
		<meta charset="utf-8" />
		</head>	
		
	<body>
	
	<header>
	<h1 id="eka">TO DO-LIST</h1>	
	</header>	
	
	<br>
	<p id="aika"></p>
		
	
	<section class="eka">
		<br>
		<p id="aika"></p>
			<h4> Lisää tehtävä/tyhjennä lista</h4>
			<input type="text" required id="text" onfocus="this.value=''" ></input> 
			<input type="button" value="lisää" id="lisaa"></input>
			<button id="tyhjenna">Tyhjennä</button>	
			
		</section>
	
	
		<section class="toka">
			
			<ul id="lista" style="list-style: none;"></ul>
			</section>
	<p class="footer" style="float: left;">Tekijä: Lauri Oksanen</p>
	</body>
</html>